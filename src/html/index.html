<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>betterbio</title>
        <style>
            body {
                background-color: #0c0c0c;
            }
            
            .container {
                display: none;

                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);

                background-color: #151515;
                border-radius: 25px;
                box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.05);
                padding: 20px;
                width: 800px;
                height: 600px;
                max-width: 90vw;
                max-height: 90vh;
            }

            .profile {
                width: 350px;
                height: 600px;
                box-sizing: border-box;

                position: absolute;
                bottom: 0;
                left: 30px;

                background-color: #151515;
                border-radius: 25px 25px 0 0;
                box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.05);
                padding: 20px;
                overflow: hidden;
            }

            .profile::after {
                content: '';
                position: absolute;
                top: 140px;
                left: 0;
                right: 0;
                bottom: 0;
                background: var(--gradient, var(--gradient-color, #151515));
                z-index: 0;
            }

            .profile-image {
                position: absolute;
                top: 90px;
                left: 22px;

                width: 100px;
                height: 100px;
                z-index: 1;

                border-radius: 50%;
                box-shadow: 0 0 0 6px rgba(255, 255, 255, 1);
            }

            .profile-banner {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;

                width: 100%;
                height: 140px;
                z-index: 0;
                
                border-radius: 25px 25px 0 0;
                object-fit: cover;
            }

            .displayname {
                position: absolute;
                top: 185px;
                left: 24px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-size: 24px;
                z-index: 1;
            }

            .username {
                position: absolute;
                top: 216px;
                left: 24px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-size: 16px;
                z-index: 1;
            }

            .bio {
                width: 325px;
                height: 260px;
                box-sizing: border-box;

                position: absolute;
                top: 260px;
                left: 12.5px;

                background-color: #151515;
                border-radius: 25px;
                padding: 20px;
                overflow: hidden;
                z-index: 3;
            }

            @media (max-width: 900px) {
                .container {
                    width: 90vw;
                    height: 80vh;
                }
            }

            @media (max-width: 600px) {
                .container {
                    width: 95vw;
                    height: 85vh;
                }
                
                .profile {
                    width: calc(100% - 60px);
                    left: 30px;
                }
            }

            @media (max-width: 480px) {
                .container {
                    width: 100vw;
                    height: 100vh;
                    border-radius: 0;
                    padding: 10px;
                }
                
                .profile {
                    width: calc(100% - 20px);
                    left: 10px;
                    height: calc(100% - 20px);
                }
            }

            * {
                color: #ffffff;
                font-family: Arial, sans-serif;
            }
        </style>
    </head>
    <body>
    <div class="container" id="container">
        <div class="profile" id="profile-content">
            <img src="https://raw.githubusercontent.com/enhancedrock/enhancedrock/refs/heads/main/squishypfp.png" alt="Profile Image" class="profile-image" id="profile-image">
            <img src="https://raw.githubusercontent.com/enhancedrock/enhancedrock/refs/heads/main/squishypfp.png" alt="Profile Banner" class="profile-banner" id="profile-banner">
            <h1 class="displayname" id="displayname">Squishy</h1>
            <p class="username" id="username">squishy</p>
            <div class="bio" id="bio">

            </div>
        </div>
    </div>
    <script>
        window.addEventListener('load', function() {
            fetch('/api/profile/theme')
                .then(response => response.json())
                .then(data => {
                    if (data.background_color) {
                        document.body.style.backgroundColor = data.background_color;
                        if (Array.isArray(data.profile_color)) {
                            const gradient = `linear-gradient(180deg, ${data.profile_color[0]} 0%, ${data.profile_color[1]} 100%)`;
                            const darkerGradient = `linear-gradient(180deg, color-mix(in srgb, ${data.profile_color[0]} 70%, black) 0%, color-mix(in srgb, ${data.profile_color[1]} 70%, black) 100%)`;
                            document.querySelector('.container').style.background = darkerGradient;
                            document.querySelector('.profile').style.setProperty('--gradient', gradient);
                            document.querySelector('.profile-image').style.boxShadow = `0 0 0 6px ${data.profile_color[0]}`;
                        } else if (data.profile_color) {
                            const darkerColor = `color-mix(in srgb, ${data.profile_color} 70%, black)`;
                            document.querySelector('.container').style.backgroundColor = darkerColor;
                            document.querySelector('.profile').style.setProperty('--gradient-color', data.profile_color);
                            document.querySelector('.profile-image').style.boxShadow = `0 0 0 6px ${data.profile_color}`;
                        }
                    }
                })
                .catch(error => {
                    console.error('Error fetching theme:', error);
                });
            document.getElementById('container').style.display = 'block';
        });
    </script>
    </body>
</html>